<div class="notifications-page">
  <div class="page-header">
    <h1>Notifications</h1>
    <div class="header-actions">
      <span class="unread-count" *ngIf="unreadCount > 0">
        {{ unreadCount }} unread
      </span>
      <button
        class="clear-btn"
        (click)="onClearNotifications()"
        [disabled]="loading || clearing || notifications.length === 0"
      >
        {{ clearing ? 'Clearing…' : 'Clear All' }}
      </button>
    </div>
  </div>

  <div class="back-link">
    <a routerLink="/home">← Back to Home</a>
  </div>

  <div *ngIf="loading" class="loading-message">
    Loading notifications...
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error" class="notifications-list">
    <div
      *ngFor="let notification of notifications"
      [class]="'notification-item ' + getStatusClass(notification.status)"
    >
      <div class="notification-header">
        <h3>{{ notification.title }}</h3>
        <span [class]="'status-badge ' + getStatusClass(notification.status)">
          {{ notification.status }}
        </span>
      </div>
      <p class="notification-message">{{ notification.message }}</p>
      <div class="notification-footer">
        <span class="notification-time">{{ formatDateTime(notification.createdAt) }}</span>
        <button
          *ngIf="notification.status === 'UNREAD'"
          class="mark-read-btn"
          (click)="onMarkAsRead(notification)"
          [disabled]="isMarkingNotification(notification.id)"
        >
          {{ isMarkingNotification(notification.id) ? 'Marking…' : 'Mark as read' }}
        </button>
      </div>
    </div>

    <div *ngIf="notifications.length === 0" class="no-notifications">
      <p>No notifications found.</p>
    </div>
  </div>
</div>

